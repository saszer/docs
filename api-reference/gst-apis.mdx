---
title: "GST & Tax APIs"
description: "Endpoints for country tax rates, GST/VAT calculations, and seeding"
---

## Overview

AI2Fin centralizes global tax logic through dedicated GST/VAT endpoints. These services power real-time calculations, country-specific defaults, and historical accuracy across expenses, bills, and reports.

<CardGroup cols={2}>
  <Card title="Country Rates" icon="globe">
    Query active GST/VAT/Sales Tax rates for every supported locale.
  </Card>
  <Card title="On-Demand Calculations" icon="calculator">
    Convert between tax-inclusive and tax-exclusive totals with consistent rounding.
  </Card>
  <Card title="Provisioning" icon="database">
    Seed initial rates when bootstrapping new environments.
  </Card>
  <Card title="Audit Trail" icon="shield-check">
    Responses include inputs so you can persist snapshot metadata alongside transactions.
  </Card>
</CardGroup>

## Endpoints

| Method | Endpoint | Description |
| --- | --- | --- |
| `GET` | `/api/tax/country-rates` | Return all active tax rates grouped by country and tax type. |
| `GET` | `/api/tax/rates/:countryCode` | Fetch rates for a specific ISO country code (e.g. `AU`, `GB`, `CA`). |
| `POST` | `/api/tax/calculate` | Calculate GST/VAT for a given amount, rate, and inclusion mode. |
| `POST` | `/api/tax/seed-rates` | (Admin) Seed baseline rates for fresh environments. |

## Fetch All Country Rates

```bash
curl -X GET https://api.ai2fin.com/api/tax/country-rates \
  -H "Authorization: Bearer ${AI2FIN_TOKEN}"
```

Example response:

```json
{
  "success": true,
  "data": {
    "rates": [
      {
        "countryCode": "AU",
        "taxType": "GST",
        "taxName": "GST",
        "standardRate": 0.1
      }
    ],
    "ratesByCountry": {
      "AU": [
        {
          "taxType": "GST",
          "taxName": "GST",
          "standardRate": 0.1
        }
      ]
    }
  }
}
```

Use `ratesByCountry` for quick lookups when populating user preference forms.

## Calculate GST/VAT

```bash
curl -X POST https://api.ai2fin.com/api/tax/calculate \
  -H "Authorization: Bearer ${AI2FIN_TOKEN}" \
  -H "Content-Type: application/json" \
  -d '{
    "amount": 132.0,
    "gstIncluded": false,
    "gstRate": 0.1
  }'
```

Response includes both the raw calculation and the original inputs:

```json
{
  "success": true,
  "data": {
    "amount": 145.2,
    "baseAmount": 132,
    "gstAmount": 13.2,
    "gstIncluded": false,
    "gstRate": 0.1,
    "input": {
      "amount": 132,
      "gstIncluded": false,
      "gstRate": 0.1
    }
  }
}
```

<Note>
  Provide `countryCode` and `taxType` when `gstRate` is omitted; the service will resolve the correct default from `CountryTaxRate`.
</Note>

## Seed Initial Rates (Admin)

Only run `/api/tax/seed-rates` when provisioning a new environment. The endpoint aborts if rates already exist to prevent overwriting live data.

```bash
curl -X POST https://api.ai2fin.com/api/tax/seed-rates \
  -H "Authorization: Bearer ${ADMIN_TOKEN}"
```

Consider storing custom rates (e.g. provincial overrides) through dedicated admin tooling that references the same Prisma models used by this service.

