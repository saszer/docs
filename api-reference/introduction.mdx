---
title: 'API Reference'
description: 'Complete API documentation for AI2Fin Financial Management Platform'
---

## Welcome to AI2Fin API

The AI2Fin API provides enterprise-grade endpoints for financial management, transaction processing, bill automation, and AI-powered tax optimization. Built for scale with support for 100,000+ concurrent users.

<Card
  title="OpenAPI Specification"
  icon="code"
  href="/api-reference/openapi.json"
>
  View the complete OpenAPI 3.1 specification
</Card>

## Quick Start

### Authentication Methods

AI2Fin API supports **two authentication methods**:

<Tabs>
  <Tab title="JWT Token (OAuth)">
    Standard authentication for web and mobile apps
  </Tab>
  
  <Tab title="API Key">
    For MCP integrations, automation, and server-to-server communication
  </Tab>
</Tabs>

### Method 1: JWT Token (OAuth)

All API endpoints (except registration and login) require authentication via JWT Bearer token or session cookie.

```bash
# Login and receive token
curl -X POST https://api.ai2fin.com/api/auth/login \
  -H "Content-Type: application/json" \
  -d '{
    "email": "user@example.com",
    "password": "********"
  }'
```

```json
{
  "success": true,
  "token": "eyJhbGc...truncated",
  "user": {
    "id": "user-uuid",
    "email": "user@example.com",
    "firstName": "John",
    "lastName": "Smith"
  }
}
```

**Using JWT Token:**
```bash
curl -X GET https://api.ai2fin.com/api/bank/transactions \
  -H "Authorization: Bearer <YOUR_JWT_TOKEN>"
```

### Method 2: API Key

API keys are ideal for:
- MCP server integrations (`/mcp/inspector` endpoint)
- Server-to-server automation
- Custom integrations and webhooks
- Testing and development

**Generate API Key:**
```bash
# Admin endpoint (requires admin JWT token)
curl -X POST https://api.ai2fin.com/api/admin/api-keys \
  -H "Authorization: Bearer <ADMIN_JWT_TOKEN>" \
  -H "Content-Type: application/json" \
  -d '{
    "name": "Production MCP Integration",
    "scopes": ["mcp:read", "mcp:tools:call"],
    "expiresInDays": 90
  }'
```

**Response:**
```json
{
  "success": true,
  "data": {
    "id": "key_abc123",
    "name": "Production MCP Integration",
    "key": "mcp_a1b2c3d4e5f6...",  // ⚠️ Save this - only shown once!
    "scopes": ["mcp:read", "mcp:tools:call"],
    "expiresAt": "2024-04-01T00:00:00Z",
    "createdAt": "2024-01-01T00:00:00Z"
  }
}
```

**Using API Key:**
```bash
# MCP Inspector endpoint
curl -X POST https://api.ai2fin.com/mcp/inspector \
  -H "X-API-Key: mcp_a1b2c3d4e5f6..." \
  -H "Content-Type: application/json" \
  -d '{
    "jsonrpc": "2.0",
    "id": 1,
    "method": "tools/list",
    "params": {}
  }'

# Standard API endpoints (if API key has appropriate scopes)
curl -X GET https://api.ai2fin.com/api/bank/transactions \
  -H "X-API-Key: mcp_a1b2c3d4e5f6..."
```

<Warning>
**API Key Security:**
- API keys are only shown once during creation - save them immediately
- Store keys securely (environment variables, secret management)
- Rotate keys regularly (every 90 days recommended)
- Revoke keys immediately if compromised
- Use minimal scopes (grant only necessary permissions)
</Warning>

**API Key Scopes:**
- `mcp:read` - Read-only MCP operations
- `mcp:tools:list` - List available tools
- `mcp:tools:call` - Execute tools (read-only)
- `mcp:resources:read` - Read resources
- `mcp:full` - Full MCP access (read + write)
- `*` (Admin) - All operations

## API Features

<CardGroup cols={2}>
  <Card title="Bank Transactions" icon="bank">
    Import, categorize, and manage bank transactions with CSV upload support
  </Card>
  <Card title="AI Classification" icon="brain">
    Intelligent transaction categorization with tax deduction analysis
  </Card>
  <Card title="Smart Categories (Elite+)" icon="folder-tree">
    Category sets, multi-category assignments, and transaction history tracking
  </Card>
  <Card title="Bill Automation" icon="calendar-check">
    Recurring bill patterns with automatic occurrence generation
  </Card>
  <Card title="Custom Rules" icon="wand-magic-sparkles">
    Create automation rules with conditions and actions for any entity
  </Card>
  <Card title="Tax Reports" icon="file-invoice-dollar">
    ATO-compliant export with GST/VAT calculations
  </Card>
  <Card title="Analytics" icon="chart-line">
    Real-time financial summaries and insights
  </Card>
</CardGroup>

## AI Assistant Chat APIs

Use the chat endpoints to power the in-app assistant, automate financial workflows, and ingest receipts securely. See the [AI Assistant guide](/features/ai-assistant) for user experience details.

| Method | Endpoint | Purpose |
| --- | --- | --- |
| `POST` | `/api/chat/message` | Send a message and receive an AI response with tool usage metadata |
| `GET` | `/api/chat/conversations` | List conversations for the authenticated user |
| `POST` | `/api/chat/conversations` | Create a new conversation thread |
| `GET` | `/api/chat/conversations/:id` | Fetch the full message history and tool calls |
| `POST` | `/api/chat/upload` | Upload files (receipts, invoices, spreadsheets) for analysis |
| `GET` | `/api/chat/files/:userId/:fileName` | Retrieve stored attachments with access control |

```bash
curl -X POST https://api.ai2fin.com/api/chat/message \
  -H "Authorization: Bearer ${AI2FIN_TOKEN}" \
  -H "Content-Type: application/json" \
  -d '{
    "conversationId": "conv_123",
    "message": "Show expenses missing receipts for September"
  }'
```

<Tip>
  Use `/api/chat/upload` before calling `/api/chat/message` when attaching a receipt image or PDF; include the returned `assetUrl` in the message payload so the assistant can analyze it.
</Tip>

## GST & Tax APIs

The tax service exposes endpoints for localized GST/VAT rate discovery and precise calculations. These power the [User Preferences](/features/user-preferences) and [Transaction Management](/guides/transaction-management) experiences.

| Method | Endpoint | Purpose |
| --- | --- | --- |
| `GET` | `/api/tax/country-rates` | Fetch all active tax rates grouped by country |
| `GET` | `/api/tax/rates/:countryCode` | Retrieve tax profiles for a specific country code (e.g. `AU`, `GB`) |
| `POST` | `/api/tax/calculate` | Calculate GST/VAT amounts for tax-inclusive or tax-exclusive scenarios |

```bash
curl -X POST https://api.ai2fin.com/api/tax/calculate \
  -H "Authorization: Bearer ${AI2FIN_TOKEN}" \
  -H "Content-Type: application/json" \
  -d '{
    "amount": 220.0,
    "gstIncluded": true,
    "countryCode": "AU",
    "taxType": "GST"
  }'
```

```json
{
  "success": true,
  "data": {
    "amount": 220,
    "baseAmount": 200,
    "gstAmount": 20,
    "gstIncluded": true,
    "gstRate": 0.1,
    "input": {
      "amount": 220,
      "gstIncluded": true,
      "gstRate": 0.1,
      "countryCode": "AU",
      "taxType": "GST"
    }
  }
}
```

<Note>
  `/api/tax/seed-rates` is reserved for provisioning environments. Use the country rate endpoints for read-only access in production clients.
</Note>

## Core Concepts

### Multi-Tenant Architecture

Every API request is scoped to the authenticated user. Data isolation is enforced at the database level with row-level security.

### Pagination

List endpoints support pagination with standard query parameters:
- `page`: Page number (default: 1)
- `limit`: Items per page (default: 50, max: 200)

```json
{
  "transactions": [...],
  "pagination": {
    "page": 1,
    "limit": 50,
    "total": 1250,
    "pages": 25
  }
}
```

### Rate Limiting

API rate limits vary by subscription tier:
- **Free**: 100 requests/15min
- **Starter**: 500 requests/15min
- **Professional**: 2000 requests/15min
- **Enterprise**: Custom limits

Rate limit headers are included in all responses:
```
X-RateLimit-Limit: 500
X-RateLimit-Remaining: 487
X-RateLimit-Reset: 1699564800
```

### Error Handling

All errors follow a consistent format:

```json
{
  "success": false,
  "error": "Resource not found",
  "code": "NOT_FOUND"
}
```

**HTTP Status Codes:**
- `200` - Success
- `201` - Created
- `400` - Bad Request (validation error)
- `401` - Unauthorized (missing/invalid token)
- `403` - Forbidden (insufficient permissions)
- `404` - Not Found
- `429` - Rate Limited
- `500` - Internal Server Error

## Advanced Features

### Custom Rules Engine

Create powerful automation rules with:
- Multiple condition types (contains, equals, regex, etc.)
- Flexible actions (set category, tax flags, etc.)
- Priority-based execution
- Support for transactions, bills, expenses, and patterns

### GST/VAT Calculations

Built-in support for tax-inclusive and tax-exclusive amounts:

```json
{
  "amount": 110.00,
  "gstIncluded": true,
  "gstRate": 0.10,
  "gstAmount": 10.00,
  "baseAmount": 100.00
}
```

### AI-Powered Features

- **Smart Categorization**: ML-based transaction classification
- **Tax Analysis**: Automatic deductibility detection
- **Pattern Recognition**: Recurring bill detection
- **Intelligent Search**: Natural language query across all data

### Access Control

Enterprise-grade security with:
- JWT-based authentication with optional JTI validation
- Cookie-based session management
- CSRF protection for web clients
- Row-level security (RLS)
- NoSQL injection guards
- Audit logging for compliance

## Webhooks

Subscribe to real-time events:
- Transaction imported
- Bill due soon
- Pattern detected
- Rule executed

<Note>
  Webhook support is available on Professional and Enterprise plans.
</Note>

## SDKs and Integration

<CodeGroup>

```typescript TypeScript
import { AI2FinClient } from '@ai2fin/sdk';

const client = new AI2FinClient({
  apiKey: process.env.AI2FIN_API_KEY,
  baseURL: 'https://api.ai2fin.com'
});

const transactions = await client.transactions.list({
  page: 1,
  limit: 50
});
```

```python Python
from ai2fin import Client

client = Client(
    api_key=os.environ['AI2FIN_API_KEY'],
    base_url='https://api.ai2fin.com'
)

transactions = client.transactions.list(page=1, limit=50)
```

```bash cURL
curl https://api.ai2fin.com/api/bank/transactions?page=1&limit=50 \
  -H "Authorization: Bearer ${AI2FIN_API_KEY}"
```

</CodeGroup>

## Rate Optimization

<Tip>
  Use batch endpoints (`/api/bank-batch/update`) to update multiple records in a single request and avoid rate limits.
</Tip>

## Support

- **Documentation**: [https://docs.ai2fin.com](https://docs.ai2fin.com)
- **Status Page**: [https://status.ai2fin.com](https://status.ai2fin.com)
- **API Health**: `GET /health`

<Check>
  All API endpoints return within 200ms (p95) and support 100K+ concurrent users.
</Check>
