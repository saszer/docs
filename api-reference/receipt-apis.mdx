---
title: "Receipt & Attachment APIs"
description: "Ingestion, analysis, and linking endpoints for receipts and supporting documents"
---

## Overview

AI2Fin provides dedicated APIs to ingest receipts, extract structured data, and attach documentation to transactions, expenses, and bills. These services underpin compliance workflows, missing-receipt alerts, and vision-driven automation.

<CardGroup cols={2}>
  <Card title="Upload" icon="upload">
    Accept images, PDFs, and spreadsheets from web or mobile clients.
  </Card>
  <Card title="Vision Analysis" icon="eye">
    Extract merchant, totals, GST, and line items using AI.
  </Card>
  <Card title="Transaction Linking" icon="link">
    Associate receipts with existing transactions or create new expenses.
  </Card>
  <Card title="Bill Attachments" icon="calendar-check">
    Link documentation to recurring bill occurrences for pattern compliance.
  </Card>
</CardGroup>

## Upload Receipts

| Method | Endpoint | Description |
| --- | --- | --- |
| `POST` | `/api/chat/upload` | Upload files within the chat workflow (supports multiple attachments). |
| `POST` | `/api/bank/transactions/:id/attachments` | (if enabled) Direct transaction attachment upload. |

```bash
curl -X POST https://api.ai2fin.com/api/chat/upload \
  -H "Authorization: Bearer ${AI2FIN_TOKEN}" \
  -F "files=@/path/to/receipt.pdf"
```

Response snippet:

```json
{
  "success": true,
  "data": {
    "files": [
      {
        "assetUrl": "/api/chat/files/user_abc/conv_xyz/file-uuid.pdf",
        "fileName": "receipt.pdf",
        "mimeType": "application/pdf"
      }
    ]
  }
}
```

## Analyze Receipts

| Method | Endpoint | Description |
| --- | --- | --- |
| `POST` | `/api/receipts/analyze` | Run OCR + AI extraction against an uploaded asset. |

```bash
curl -X POST https://api.ai2fin.com/api/receipts/analyze \
  -H "Authorization: Bearer ${AI2FIN_TOKEN}" \
  -H "Content-Type: application/json" \
  -d '{
    "assetUrl": "/api/chat/files/user_abc/conv_xyz/file-uuid.jpg",
    "mimeType": "image/jpeg",
    "size": 245678
  }'
```

Extraction response:

```json
{
  "success": true,
  "data": {
    "extracted": {
      "merchant": "Woolworths",
      "dateISO": "2025-07-14",
      "total": 45.67,
      "tax": 4.15
    },
    "candidates": [
      { "id": "txn_123", "date": "2025-07-14", "amount": 45.67 }
    ],
    "asset": {
      "assetUrl": "/api/chat/files/user_abc/conv_xyz/file-uuid.jpg"
    }
  }
}
```

## Commit & Link Receipts

| Method | Endpoint | Description |
| --- | --- | --- |
| `POST` | `/api/receipts/commit` | Link analyzed data to a transaction or create a new expense. |
| `POST` | `/api/bills/occurrences/:id/upload-receipt` | Link documentation to a bill occurrence (uses chat tool internally). |

```bash
curl -X POST https://api.ai2fin.com/api/receipts/commit \
  -H "Authorization: Bearer ${AI2FIN_TOKEN}" \
  -H "Content-Type: application/json" \
  -d '{
    "assetUrl": "/api/chat/files/user_abc/conv_xyz/file-uuid.jpg",
    "mimeType": "image/jpeg",
    "size": 245678,
    "action": {
      "type": "link",
      "transactionId": "txn_123"
    },
    "extracted": {
      "merchant": "Woolworths",
      "total": 45.67
    }
  }'
```

Successful link response:

```json
{
  "success": true,
  "data": {
    "entityType": "transaction",
    "entityId": "txn_123"
  }
}
```

## Retrieve Attachments

| Method | Endpoint | Description |
| --- | --- | --- |
| `GET` | `/api/chat/files/:userId/:fileName` | Stream stored attachments back to authorized clients. |

Ensure callers only request files belonging to their tenantâ€”authorization middleware enforces ownership.

## Best Practices

- Upload files first, then call `/api/receipts/analyze` to leverage AI extraction before committing.
- Persist the returned `assetUrl` and AI extraction payload so you can audit changes or re-run analyses later.
- Use the [AI Assistant Chat APIs](/api-reference/chat-apis) for conversational workflows that orchestrate uploads, analysis, and linking in a single interaction.

