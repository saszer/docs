---
title: "AI Assistant Chat APIs"
description: "Endpoints for conversational workflows, chat history, and file uploads"
---

## Overview

AI2Fin exposes REST endpoints to power the in-app conversational assistant and third-party chat integrations. These APIs are secured with the same authentication stack as the rest of the platform and respect rate limits, audit logging, and per-user isolation.

<CardGroup cols={2}>
  <Card title="Chat Messaging" icon="message-circle">
    Send and retrieve messages, including AI responses with tool metadata.
  </Card>
  <Card title="Conversation Management" icon="folder">
    Create and list conversation threads for omnichannel experiences.
  </Card>
  <Card title="File Uploads" icon="upload">
    Upload receipts, invoices, and documents for AI extraction.
  </Card>
  <Card title="Attachment Delivery" icon="download">
    Serve stored files back to authorized clients with signed URLs.
  </Card>
</CardGroup>

## Authentication & Headers

All chat APIs require a valid JWT bearer token or an authenticated session cookie. Include `Content-Type: application/json` for JSON payloads, and `multipart/form-data` when uploading files.

## Conversations

| Method | Endpoint | Description |
| --- | --- | --- |
| `GET` | `/api/chat/conversations` | List conversations scoped to the authenticated user. |
| `POST` | `/api/chat/conversations` | Create a new conversation thread. |
| `GET` | `/api/chat/conversations/:id` | Retrieve full history, messages, tool invocations, and metadata. |

```bash
curl -X GET https://api.ai2fin.com/api/chat/conversations \
  -H "Authorization: Bearer ${AI2FIN_TOKEN}"
```

<Tip>
  Persist `conversationId` in your client to maintain context across subsequent `/api/chat/message` calls.
</Tip>

## Messaging

| Method | Endpoint | Description |
| --- | --- | --- |
| `POST` | `/api/chat/message` | Send a new user message and receive the AI assistant response. |
| `POST` | `/api/chat/stream` | Initiate a streaming SSE response (beta). |
| `GET` | `/api/chat/stream-test` | Health-check for streaming infrastructure. |

```bash
curl -X POST https://api.ai2fin.com/api/chat/message \
  -H "Authorization: Bearer ${AI2FIN_TOKEN}" \
  -H "Content-Type: application/json" \
  -d '{
    "conversationId": "conv_123",
    "message": "Show me expenses missing receipts"
  }'
```

The assistant response includes:

```json
{
  "success": true,
  "data": {
    "conversationId": "conv_123",
    "message": {
      "role": "assistant",
      "content": "...",
      "toolsUsed": ["get_spending_analytics"]
    }
  }
}
```

## File Uploads & Receipts

| Method | Endpoint | Description |
| --- | --- | --- |
| `POST` | `/api/chat/upload` | Upload one or more files to associate with a conversation. |
| `POST` | `/api/receipts/analyze` | Extract data from an uploaded asset (requires `assetUrl`). |
| `POST` | `/api/receipts/commit` | Link the analyzed receipt to a transaction or create a new expense. |

```bash
curl -X POST https://api.ai2fin.com/api/chat/upload \
  -H "Authorization: Bearer ${AI2FIN_TOKEN}" \
  -F "files=@/path/to/receipt.jpg"
```

The upload response supplies an `assetUrl` you can reference in `/api/receipts/analyze` or subsequent chat messages.

## Attachment Delivery

| Method | Endpoint | Description |
| --- | --- | --- |
| `GET` | `/api/chat/files/:userId/:fileName` | Stream a previously uploaded asset if the requester has access. |

Use this endpoint to render receipts or invoice images in your own UI after the assistant confirms storage.

## Rate Limits & Performance

Chat endpoints share the global AI quota. Enterprise plans can request dedicated throughput for automation-heavy workflows. Monitor `X-RateLimit-*` headers and leverage `/api/chat/stream` for long-running analyses to avoid timeout retries.

